### JuridicAI API - HTTP Requests
### Plataforma multi-tenant para gest√£o de escrit√≥rios de advocacia
###
### Base URL: http://localhost:3333
### Documenta√ß√£o: https://docs.juridicai.com.br
###
### Arquitetura Multi-Tenant:
### - Endpoints tenant-scoped requerem header X-Tenant-ID
### - Todos os endpoints (exceto health e auth) requerem autentica√ß√£o JWT
###
### Conven√ß√µes:
### - Content-Type: application/json
### - Timestamps: ISO 8601 format (UTC)
### - Database fields: snake_case
### - Pagina√ß√£o: ?page=1&per_page=20
### - Busca: ?search=termo
### - Filtros: query parameters espec√≠ficos por recurso

### Variables (substituir com valores reais)
@baseUrl = http://localhost:3333
@token = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
@tenantId = 550e8400-e29b-41d4-a716-446655440000
@clientId = 1
@caseId = 1
@deadlineId = 1
@documentId = 1
@eventId = 1

###############################################################################
### üè• HEALTH ENDPOINTS (N√£o requer autentica√ß√£o)
###############################################################################

### Health Check
GET {{baseUrl}}/health
Accept: application/json

###############################################################################
### üîê AUTHENTICATION ENDPOINTS
###############################################################################

### Login (Sign In)
POST {{baseUrl}}/api/v1/auth/login
Content-Type: application/json

{
  "email": "advogado@escritorio.com.br",
  "password": "senha_segura_123"
}

### Response:
# {
#   "user": {
#     "id": 1,
#     "email": "advogado@escritorio.com.br",
#     "full_name": "Dr. Jo√£o Silva",
#     "role": "lawyer",
#     "is_active": true
#   },
#   "token": {
#     "type": "bearer",
#     "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
#     "expires_at": "2024-12-31T23:59:59.000Z"
#   }
# }

### Logout (Sign Out)
POST {{baseUrl}}/api/v1/auth/logout
Authorization: Bearer {{token}}
Accept: application/json

###############################################################################
### üë§ PROFILE ENDPOINTS (Requer autentica√ß√£o)
###############################################################################

### Get Current User Profile
GET {{baseUrl}}/api/v1/profile
Authorization: Bearer {{token}}
Accept: application/json

### Update Current User Profile
PATCH {{baseUrl}}/api/v1/profile
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "full_name": "Dr. Jo√£o Silva Advogado",
  "phone": "(11) 98765-4321"
}

### Update Password
PATCH {{baseUrl}}/api/v1/profile/password
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "current_password": "senha_antiga",
  "new_password": "nova_senha_segura_123",
  "new_password_confirmation": "nova_senha_segura_123"
}

###############################################################################
### üè¢ TENANT MANAGEMENT (Requer autentica√ß√£o)
###############################################################################

### List All Tenants (Admin)
GET {{baseUrl}}/api/v1/tenants
Authorization: Bearer {{token}}
Accept: application/json

### Get Current Tenant Info
GET {{baseUrl}}/api/v1/tenants/me
Authorization: Bearer {{token}}
Accept: application/json

### Response:
# {
#   "id": "550e8400-e29b-41d4-a716-446655440000",
#   "name": "Silva & Advogados Associados",
#   "subdomain": "silva-advogados",
#   "plan": "professional",
#   "limits": {
#     "max_users": 50,
#     "max_cases": 1000,
#     "storage_gb": 100
#   },
#   "is_active": true,
#   "created_at": "2024-01-01T10:00:00.000Z"
# }

### Create Tenant (Admin)
POST {{baseUrl}}/api/v1/tenants
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "name": "Advocacia Santos & Associados",
  "subdomain": "santos-advogados",
  "plan": "professional",
  "admin_email": "admin@santos.com.br",
  "admin_name": "Dr. Carlos Santos"
}

### Update Tenant
PATCH {{baseUrl}}/api/v1/tenants/{{tenantId}}
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "name": "Advocacia Santos & Parceiros Ltda",
  "plan": "enterprise"
}

### Delete Tenant (Soft Delete)
DELETE {{baseUrl}}/api/v1/tenants/{{tenantId}}
Authorization: Bearer {{token}}

###############################################################################
### üë• CLIENTS MANAGEMENT (Tenant-scoped)
###############################################################################

### List Clients (with pagination)
GET {{baseUrl}}/api/v1/clients?page=1&per_page=20
Authorization: Bearer {{token}}
X-Tenant-ID: {{tenantId}}
Accept: application/json

### List Clients (with filters)
GET {{baseUrl}}/api/v1/clients?search=Silva&is_active=true&state=SP&client_type=individual
Authorization: Bearer {{token}}
X-Tenant-ID: {{tenantId}}
Accept: application/json

### Get Client by ID
GET {{baseUrl}}/api/v1/clients/{{clientId}}
Authorization: Bearer {{token}}
X-Tenant-ID: {{tenantId}}
Accept: application/json

### Create Individual Client (Pessoa F√≠sica)
POST {{baseUrl}}/api/v1/clients
Authorization: Bearer {{token}}
X-Tenant-ID: {{tenantId}}
Content-Type: application/json

{
  "client_type": "individual",
  "full_name": "Maria Santos",
  "cpf": "123.456.789-09",
  "email": "maria@email.com",
  "phone": "(11) 98765-4321",
  "address": {
    "street": "Avenida Paulista",
    "number": "1578",
    "complement": "Apto 101",
    "neighborhood": "Bela Vista",
    "city": "S√£o Paulo",
    "state": "SP",
    "zip_code": "01310-200",
    "country": "Brasil"
  },
  "tags": ["vip", "pessoa-fisica"],
  "is_active": true
}

### Create Company Client (Pessoa Jur√≠dica)
POST {{baseUrl}}/api/v1/clients
Authorization: Bearer {{token}}
X-Tenant-ID: {{tenantId}}
Content-Type: application/json

{
  "client_type": "company",
  "company_name": "Tech Solutions Ltda",
  "cnpj": "12.345.678/0001-90",
  "email": "contato@techsolutions.com.br",
  "phone": "(11) 3456-7890",
  "address": {
    "street": "Avenida Faria Lima",
    "number": "3500",
    "complement": "12¬∫ andar",
    "neighborhood": "Itaim Bibi",
    "city": "S√£o Paulo",
    "state": "SP",
    "zip_code": "04538-132",
    "country": "Brasil"
  },
  "tags": ["empresa", "tecnologia"],
  "custom_fields": {
    "setor": "Tecnologia",
    "funcionarios": 150
  },
  "notes": "Cliente desde 2020. Contrato de consultoria mensal.",
  "is_active": true
}

### Update Client
PATCH {{baseUrl}}/api/v1/clients/{{clientId}}
Authorization: Bearer {{token}}
X-Tenant-ID: {{tenantId}}
Content-Type: application/json

{
  "email": "novoemail@email.com",
  "phone": "(11) 99999-8888",
  "address": {
    "street": "Rua Nova",
    "number": "456",
    "city": "S√£o Paulo",
    "state": "SP",
    "zip_code": "01234-567",
    "country": "Brasil"
  }
}

### Delete Client (Soft Delete)
DELETE {{baseUrl}}/api/v1/clients/{{clientId}}
Authorization: Bearer {{token}}
X-Tenant-ID: {{tenantId}}

###############################################################################
### ‚öñÔ∏è CASES MANAGEMENT (Tenant-scoped)
###############################################################################

### List Cases
GET {{baseUrl}}/api/v1/cases?page=1&per_page=20
Authorization: Bearer {{token}}
X-Tenant-ID: {{tenantId}}
Accept: application/json

### List Cases (with filters)
GET {{baseUrl}}/api/v1/cases?status=active&case_type=civil&priority=high&client_id={{clientId}}
Authorization: Bearer {{token}}
X-Tenant-ID: {{tenantId}}
Accept: application/json

### Get Case by ID
GET {{baseUrl}}/api/v1/cases/{{caseId}}
Authorization: Bearer {{token}}
X-Tenant-ID: {{tenantId}}
Accept: application/json

### Create Case (Processo)
POST {{baseUrl}}/api/v1/cases
Authorization: Bearer {{token}}
X-Tenant-ID: {{tenantId}}
Content-Type: application/json

{
  "client_id": 1,
  "case_number": "0000123-45.2024.8.26.0100",
  "internal_number": "CASE-2024-001",
  "case_type": "civil",
  "court": "TJ-SP",
  "court_instance": "1¬™ Vara C√≠vel",
  "status": "active",
  "priority": "high",
  "responsible_lawyer_id": 1,
  "team_members": [1, 2, 3],
  "description": "A√ß√£o de indeniza√ß√£o por danos morais e materiais",
  "parties": {
    "autor": {
      "name": "Maria Santos",
      "cpf": "123.456.789-09",
      "email": "maria@email.com",
      "phone": "(11) 98765-4321"
    },
    "reu": {
      "name": "Empresa XYZ Ltda",
      "cnpj": "12.345.678/0001-90",
      "email": "contato@empresaxyz.com.br"
    },
    "outros": [
      {
        "tipo": "Testemunha",
        "name": "Jo√£o da Silva",
        "cpf": "987.654.321-00"
      }
    ]
  },
  "case_value": 50000.00,
  "filed_at": "2024-01-15",
  "tags": ["indenizacao", "danos-morais"]
}

### Create Case (Without CNJ Number)
POST {{baseUrl}}/api/v1/cases
Authorization: Bearer {{token}}
X-Tenant-ID: {{tenantId}}
Content-Type: application/json

{
  "client_id": 1,
  "internal_number": "CASE-2024-002",
  "case_type": "labor",
  "court": "TRT-2",
  "status": "active",
  "priority": "medium",
  "responsible_lawyer_id": 1,
  "description": "Reclama√ß√£o trabalhista - horas extras"
}

### Update Case
PATCH {{baseUrl}}/api/v1/cases/{{caseId}}
Authorization: Bearer {{token}}
X-Tenant-ID: {{tenantId}}
Content-Type: application/json

{
  "status": "closed",
  "closed_at": "2024-12-31",
  "description": "Processo finalizado com acordo entre as partes"
}

### Delete Case (Soft Delete)
DELETE {{baseUrl}}/api/v1/cases/{{caseId}}
Authorization: Bearer {{token}}
X-Tenant-ID: {{tenantId}}

###############################################################################
### üìÖ DEADLINES MANAGEMENT (Tenant-scoped)
###############################################################################

### List Deadlines
GET {{baseUrl}}/api/v1/deadlines?page=1&per_page=20
Authorization: Bearer {{token}}
X-Tenant-ID: {{tenantId}}
Accept: application/json

### List Upcoming Deadlines (Next 7 days)
GET {{baseUrl}}/api/v1/deadlines/upcoming?days=7
Authorization: Bearer {{token}}
X-Tenant-ID: {{tenantId}}
Accept: application/json

### List Deadlines (with filters)
GET {{baseUrl}}/api/v1/deadlines?case_id={{caseId}}&is_completed=false&priority=urgent
Authorization: Bearer {{token}}
X-Tenant-ID: {{tenantId}}
Accept: application/json

### Get Deadline by ID
GET {{baseUrl}}/api/v1/deadlines/{{deadlineId}}
Authorization: Bearer {{token}}
X-Tenant-ID: {{tenantId}}
Accept: application/json

### Create Deadline
POST {{baseUrl}}/api/v1/deadlines
Authorization: Bearer {{token}}
X-Tenant-ID: {{tenantId}}
Content-Type: application/json

{
  "case_id": 1,
  "title": "Apresentar contesta√ß√£o",
  "description": "Prazo de 15 dias para apresentar contesta√ß√£o na a√ß√£o de indeniza√ß√£o",
  "due_date": "2024-02-15",
  "responsible_user_id": 1,
  "priority": "high",
  "is_fatal": true,
  "alert_config": {
    "alerts": [
      {
        "days_before": 7,
        "sent": false
      },
      {
        "days_before": 3,
        "sent": false
      },
      {
        "days_before": 1,
        "sent": false
      }
    ]
  },
  "tags": ["contestacao", "prazo-fatal"]
}

### Create Simple Deadline
POST {{baseUrl}}/api/v1/deadlines
Authorization: Bearer {{token}}
X-Tenant-ID: {{tenantId}}
Content-Type: application/json

{
  "case_id": 1,
  "title": "Reuni√£o com cliente",
  "due_date": "2024-02-01",
  "responsible_user_id": 1,
  "priority": "medium",
  "is_fatal": false
}

### Update Deadline
PATCH {{baseUrl}}/api/v1/deadlines/{{deadlineId}}
Authorization: Bearer {{token}}
X-Tenant-ID: {{tenantId}}
Content-Type: application/json

{
  "due_date": "2024-02-20",
  "priority": "urgent",
  "description": "Prazo prorrogado por 5 dias"
}

### Complete Deadline
POST {{baseUrl}}/api/v1/deadlines/{{deadlineId}}/complete
Authorization: Bearer {{token}}
X-Tenant-ID: {{tenantId}}
Content-Type: application/json

{
  "completion_notes": "Contesta√ß√£o protocolada com sucesso em 14/02/2024"
}

### Delete Deadline
DELETE {{baseUrl}}/api/v1/deadlines/{{deadlineId}}
Authorization: Bearer {{token}}
X-Tenant-ID: {{tenantId}}

###############################################################################
### üìÑ DOCUMENTS MANAGEMENT (Tenant-scoped)
###############################################################################

### List Documents
GET {{baseUrl}}/api/v1/documents?page=1&per_page=20
Authorization: Bearer {{token}}
X-Tenant-ID: {{tenantId}}
Accept: application/json

### List Documents (with filters)
GET {{baseUrl}}/api/v1/documents?case_id={{caseId}}&document_type=petition&status=final
Authorization: Bearer {{token}}
X-Tenant-ID: {{tenantId}}
Accept: application/json

### Get Document by ID
GET {{baseUrl}}/api/v1/documents/{{documentId}}
Authorization: Bearer {{token}}
X-Tenant-ID: {{tenantId}}
Accept: application/json

### Create Document
POST {{baseUrl}}/api/v1/documents
Authorization: Bearer {{token}}
X-Tenant-ID: {{tenantId}}
Content-Type: application/json

{
  "case_id": 1,
  "title": "Peti√ß√£o Inicial",
  "document_type": "petition",
  "file_path": "/storage/documents/peticao-inicial-2024-001.pdf",
  "file_size": 1048576,
  "mime_type": "application/pdf",
  "status": "final",
  "description": "Peti√ß√£o inicial da a√ß√£o de indeniza√ß√£o",
  "uploaded_by": 1,
  "tags": ["peticao", "inicial"],
  "metadata": {
    "paginas": 15,
    "assinado": true
  }
}

### Update Document
PATCH {{baseUrl}}/api/v1/documents/{{documentId}}
Authorization: Bearer {{token}}
X-Tenant-ID: {{tenantId}}
Content-Type: application/json

{
  "title": "Peti√ß√£o Inicial - Revisada",
  "status": "final",
  "description": "Peti√ß√£o inicial revisada ap√≥s an√°lise do cliente"
}

### Download Document
GET {{baseUrl}}/api/v1/documents/{{documentId}}/download
Authorization: Bearer {{token}}
X-Tenant-ID: {{tenantId}}
Accept: application/octet-stream

### Delete Document (Soft Delete)
DELETE {{baseUrl}}/api/v1/documents/{{documentId}}
Authorization: Bearer {{token}}
X-Tenant-ID: {{tenantId}}

###############################################################################
### üìã CASE EVENTS MANAGEMENT (Tenant-scoped)
###############################################################################

### List Case Events
GET {{baseUrl}}/api/v1/case-events?page=1&per_page=20
Authorization: Bearer {{token}}
X-Tenant-ID: {{tenantId}}
Accept: application/json

### List Case Events (with filters)
GET {{baseUrl}}/api/v1/case-events?case_id={{caseId}}&event_type=hearing&source=manual
Authorization: Bearer {{token}}
X-Tenant-ID: {{tenantId}}
Accept: application/json

### Get Case Event by ID
GET {{baseUrl}}/api/v1/case-events/{{eventId}}
Authorization: Bearer {{token}}
X-Tenant-ID: {{tenantId}}
Accept: application/json

### Create Case Event - Hearing
POST {{baseUrl}}/api/v1/case-events
Authorization: Bearer {{token}}
X-Tenant-ID: {{tenantId}}
Content-Type: application/json

{
  "case_id": 1,
  "event_type": "hearing",
  "title": "Audi√™ncia de Concilia√ß√£o",
  "description": "Audi√™ncia de tentativa de concilia√ß√£o entre as partes",
  "event_date": "2024-03-15T14:30:00.000Z",
  "source": "manual",
  "created_by": 1,
  "metadata": {
    "local": "Sala 3 - 2¬∫ andar",
    "juiz": "Dr. Carlos Mendes",
    "duracao_estimada": "2 horas"
  }
}

### Create Case Event - Decision
POST {{baseUrl}}/api/v1/case-events
Authorization: Bearer {{token}}
X-Tenant-ID: {{tenantId}}
Content-Type: application/json

{
  "case_id": 1,
  "event_type": "decision",
  "title": "Decis√£o Interlocut√≥ria",
  "description": "Juiz deferiu produ√ß√£o de prova pericial",
  "event_date": "2024-02-20T10:00:00.000Z",
  "source": "court_api",
  "metadata": {
    "numero_decisao": "DEC-2024-456",
    "tipo_decisao": "Deferimento"
  }
}

### Create Case Event - Publication
POST {{baseUrl}}/api/v1/case-events
Authorization: Bearer {{token}}
X-Tenant-ID: {{tenantId}}
Content-Type: application/json

{
  "case_id": 1,
  "event_type": "publication",
  "title": "Publica√ß√£o de Senten√ßa",
  "description": "Senten√ßa publicada no DJE",
  "event_date": "2024-04-10T00:00:00.000Z",
  "source": "email",
  "metadata": {
    "dje": "DJE-2024-123",
    "pagina": 45
  }
}

### Update Case Event
PATCH {{baseUrl}}/api/v1/case-events/{{eventId}}
Authorization: Bearer {{token}}
X-Tenant-ID: {{tenantId}}
Content-Type: application/json

{
  "title": "Audi√™ncia de Concilia√ß√£o - Remarcada",
  "event_date": "2024-03-20T14:30:00.000Z",
  "description": "Audi√™ncia remarcada a pedido da parte autora"
}

### Delete Case Event
DELETE {{baseUrl}}/api/v1/case-events/{{eventId}}
Authorization: Bearer {{token}}
X-Tenant-ID: {{tenantId}}

###############################################################################
### üìä EXAMPLE RESPONSES
###############################################################################

### Success - Client Created
# {
#   "id": 1,
#   "tenant_id": "550e8400-e29b-41d4-a716-446655440000",
#   "client_type": "individual",
#   "full_name": "Maria Santos",
#   "cpf": "123.456.789-09",
#   "email": "maria@email.com",
#   "phone": "(11) 98765-4321",
#   "address": {
#     "street": "Avenida Paulista",
#     "number": "1578",
#     "complement": "Apto 101",
#     "neighborhood": "Bela Vista",
#     "city": "S√£o Paulo",
#     "state": "SP",
#     "zip_code": "01310-200",
#     "country": "Brasil"
#   },
#   "tags": ["vip", "pessoa-fisica"],
#   "is_active": true,
#   "created_at": "2024-01-15T10:30:00.000Z",
#   "updated_at": "2024-01-15T10:30:00.000Z"
# }

### Success - Paginated List
# {
#   "data": [...],
#   "meta": {
#     "total": 150,
#     "per_page": 20,
#     "current_page": 1,
#     "last_page": 8,
#     "first_page_url": "http://localhost:3333/api/v1/clients?page=1",
#     "last_page_url": "http://localhost:3333/api/v1/clients?page=8",
#     "next_page_url": "http://localhost:3333/api/v1/clients?page=2",
#     "prev_page_url": null
#   }
# }

### Error - Validation Error (422)
# {
#   "errors": [
#     {
#       "message": "Validation failed",
#       "rule": "regex",
#       "field": "cpf",
#       "meta": {
#         "pattern": "^\\d{3}\\.\\d{3}\\.\\d{3}-\\d{2}$"
#       }
#     }
#   ]
# }

### Error - Unauthorized (401)
# {
#   "errors": [
#     {
#       "message": "Unauthorized - Token is missing or invalid",
#       "code": "UNAUTHORIZED"
#     }
#   ]
# }

### Error - Forbidden (403)
# {
#   "errors": [
#     {
#       "message": "You don't have permission to access this resource",
#       "code": "FORBIDDEN"
#     }
#   ]
# }

### Error - Not Found (404)
# {
#   "errors": [
#     {
#       "message": "Client not found",
#       "code": "NOT_FOUND"
#     }
#   ]
# }

### Error - Rate Limit Exceeded (429)
# {
#   "errors": [
#     {
#       "message": "Too many requests. Please try again later.",
#       "code": "RATE_LIMIT_EXCEEDED"
#     }
#   ]
# }

###############################################################################
### üìù NOTES
###############################################################################

# Multi-Tenant Headers:
# - X-Tenant-ID: Obrigat√≥rio para todos os endpoints tenant-scoped
# - Authorization: Bearer {token} - Obrigat√≥rio para endpoints autenticados
#
# Formatos Brasileiros:
# - CPF: XXX.XXX.XXX-XX (ex: 123.456.789-09)
# - CNPJ: XX.XXX.XXX/XXXX-XX (ex: 12.345.678/0001-90)
# - CNJ: NNNNNNN-DD.AAAA.J.TR.OOOO (ex: 0000123-45.2024.8.26.0100)
# - CEP: XXXXX-XXX (ex: 01310-200)
#
# Tipos de Casos:
# - civil, criminal, labor, family, tax, administrative, other
#
# Tipos de Eventos:
# - filing, hearing, decision, publication, appeal, motion, settlement, judgment, other
#
# Tipos de Documentos:
# - petition, contract, power_of_attorney, evidence, decision, sentence, protocol, other
#
# Status de Casos:
# - active, closed, archived, suspended
#
# Prioridades:
# - low, medium, high, urgent

###############################################################################
### ‚öñÔ∏è EXTERNAL API - DATAJUD (CNJ)
###############################################################################

### Search for a lawsuit by its number
# @name searchProcess
GET https://api-publica.datajud.cnj.jus.br/api_publica_trf1/_search
Content-Type: application/json
Authorization: APIKey cDZHYzlZa0JadVREZDJCendQbXY6SkJlTzNjLV9TRENyQk1RdnFKZGRQdw==

{
  "query": {
    "match": {
      "numeroProcesso": "00008323520184013202"
    }
  }
}
